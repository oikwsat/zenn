---
title: "コンテナ内に入る"
---

## 「コンテナ内に入る」とは？

Docker コンテナの内部でシェルを開き、直接コマンドを実行できる状態にすること。
具体的には、ホストマシンからコンテナ内のファイルシステムやプロセスにアクセスし、操作することができるようになる。
Linux のコマンドを実行することで、ソフトウェアのインストールや設定の書き換えが可能になる。

## コンテナ内に入る方法

`docker exec` コマンドを使用する。

```shell
docker exec (オプション) <コンテナ名> /bin/bash
```

`/bin/bash` はコンテナ内 OS で使用する shell を指定している。
使用するディストリビューションによって利用可能な shell が異なり、複数利用できる場合もあるため、明示的に指定する必要がある。

:::details オプション一覧

1. **`-i` (インタラクティブモード)**

   - コンテナ内でコマンドを実行している間、標準入力を開いたままにします。これにより、実行中のプロセスに入力を行うことができます。
   - 例: コンテナ内でコマンドを実行し、その実行中に入力を行いたい場合
     ```sh
     docker exec -i <コンテナID> <コマンド>
     ```

2. **`-t` (ターミナルを割り当てる)**

   - 疑似ターミナルを割り当てます。通常、インタラクティブなシェルセッションを開くために使います。
   - 例: コンテナ内でインタラクティブに操作したい場合（例えば、シェルを開く場合）
     ```sh
     docker exec -it <コンテナID> /bin/bash
     ```

3. **`-u` (ユーザーを指定)**

   - 指定したユーザーでコマンドを実行します。ユーザー名または UID を指定できます。
   - 例: ルートユーザーでコマンドを実行したい場合
     ```sh
     docker exec -u root <コンテナID> <コマンド>
     ```

4. **`-e` (環境変数を設定)**

   - コマンド実行時に特定の環境変数を設定します。
   - 例: 環境変数を設定してコマンドを実行したい場合
     ```sh
     docker exec -e MY_VAR=my_value <コンテナID> <コマンド>
     ```

5. **`--env-file` (環境変数ファイルを指定)**

   - 環境変数を定義したファイルを指定します。ファイル内のすべての環境変数が適用されます。
   - 例: 環境変数をまとめてファイルで指定してコマンドを実行したい場合
     ```sh
     docker exec --env-file my_env_file.env <コンテナID> <コマンド>
     ```

6. **`-w` (作業ディレクトリを指定)**

   - コマンドを実行する作業ディレクトリを指定します。
   - 例: 特定のディレクトリでコマンドを実行したい場合
     ```sh
     docker exec -w /my/workdir <コンテナID> <コマンド>
     ```

7. **`--privileged` (特権モードで実行)**
   - 特権モードでコマンドを実行します。これにより、コンテナ内でより多くのシステム操作が可能になります。
   - 例: コンテナ内で特権操作が必要な場合
     ```sh
     docker exec --privileged <コンテナID> <コマンド>
     ```

#### 基本的な使用例

コンテナ内でインタラクティブなシェルセッションを開く（一般的に使われる方法）

```sh
docker exec -it <コンテナID> /bin/bash
```

#### 環境変数を設定してコマンドを実行する

```sh
docker exec -e MY_VAR=my_value <コンテナID> <コマンド>
```

#### 特定のユーザーでコマンドを実行する

```sh
docker exec -u root <コンテナID> <コマンド>
```

これらのオプションを使い分けることで、Docker コンテナ内での操作を効率的かつ柔軟に行うことができます。

:::
