---
title: "3層スキーマ"
---

## スキーマとは

- データベースの「データ構造」や「フォーマット」
- データベースの設計図
- スキーマを定義することにより、データの格納形式が決まる
- 三層スキーマアーキテクチャという以下の三つのレベルに分けられる
  - **外部スキーマ**（外部モデル）= ビューの世界
  - **概念スキーマ**（論理データモデル）= テーブルの世界
  - **内部スキーマ**（物理データモデル）= ファイルの世界
- 三つのスキーマに基づいてシステムを記述したモデルを「**３層スキーマモデル**」と呼ぶ

![](https://storage.googleapis.com/zenn-user-upload/75e89c08fe5d-20230916.png)

## 外部スキーマ

- 正規化する前のスキーマ
- エンドユーザからみたデータモデルを表現する
- データベース内の特定のテーブルやカラムが非表示になることがあり、必要なデータだけが公開される
  - データのセキュリティやプライバシーが確保される

## 概念スキーマ

- 正規化した後のスキーマ
- 概念スキーマの設計を「論理設計」とも呼ぶ

## 内部スキーマ

- 概念スキーマで定義した論理データモデルを、具体的にどのように DBMS 内部に格納するかを定義するスキーマ
- DBMS から見た DB
- パフォーマンスの最適化やデータセキュリティの実装に関連する
  - データの格納形式、インデックス、アクセス方法など
- 「ファイル」で表現される（RDM もコンピュータ上で動くので、最終的にはファイル形式になる）
- 内部スキーマの設計を「物理設計」と呼ぶ

## 3 層に分ける理由

- 各スキーマにおいて変更があっても他の 2 つには影響が起きないから
- 仕様変更が起きた際に都度データベース全体に影響するのを防ぐ
- 概念スキーマは、外部スキーマと内部スキーマの間に位置することで、両者の変更が互いに影響し合わないための、緩衝材の役割を果たす

![](https://storage.googleapis.com/zenn-user-upload/efedbaa725e0-20230916.png)
