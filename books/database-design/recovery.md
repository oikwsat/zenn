---
title: "リカバリ"
---

## 最終バックアップ後から障害発生までの変更分はどのように復旧するのか？

- 障害直前の状態にデータを復旧させるには、単にバックアップファイルを DB に戻すだけではダメ
- 追加で、最終バックアップから障害発生までの変更分を再反映させる必要がある

![](https://storage.googleapis.com/zenn-user-upload/c7172da35cb3-20230917.png)

## 「リカバリ」と「リストア」

### リストア

- **バックアップファイル**を DB に戻す作業

### リカバリ

- ログファイル（トランザクションログ）を使用して変更分を反映する作業

![](https://storage.googleapis.com/zenn-user-upload/7c77c9ec1f25-20230917.png)

## リストアとロールフォワード

- トランザクションログは、バックアップしたものだけではない
- **最終バックアップ後に作成されたログファイル DBMS に残っている**
- 未バックアップのトランザクションログまで適用することで、障害直前の状態に戻せる

### データ復旧までの手順

1. フルバックアップのファイルを DB に戻す → **リストア**
2. 差分（or 増分）バックアップしていたトランザクションログを適用する → **リカバリ**
3. DBMS に残っているトランザクションログを適用する → **ロールフォワード**
