---
title: "トランザクション処理・バッチ処理"
---

## トランザクション処理

### 特徴

- 途中で失敗すれば、処理実行前の状態に戻る
- Write 処理の前に必ず Read 処理を行う必要がある
- トランザクション対象のドキュメントが変更中（編集中）の場合、リトライされる
- 1 回のトランザクションでドキュメントに書き込めるのは、最大 500 個まで
- クライアントがオフラインの時は、トランザクションが失敗する
- Read 処理は `get()`、Write 処理は `set()`, `update()`, `delete()` のいずれか
- Write 処理は一部の Write 処理だけ実行されることはなく、トランザクション成功時に、すべての Write 処理が実行される

### 失敗条件

- Write 処理の後に Read 処理をしたとき
- トランザクション対象のドキュメントが、実行中のトランザクション処理とは別の処理で変更されているとき
- クライアントがオフラインの時

## バッチ処理

### 一度のバッチで最大 500 件の書き込み制限を対策する

https://zenn.dev/sgr_ksmt/articles/b5fa4f8b9e0a33ccf609

## 参考リンク

https://zenn.dev/shtk0119/articles/f0401ba8016822
